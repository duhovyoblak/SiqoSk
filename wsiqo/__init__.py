#==============================================================================
#  SIQO Web server: Initialization of the Server
#------------------------------------------------------------------------------
import os

#==============================================================================
# Setting the environment
#------------------------------------------------------------------------------
os.environ['wsiqo-test-mode' ] = '1'
os.environ['wsiqo-secret-key'] = 'asklurgw8374yhcbfQ2R7GYFQPIUBR'

#==============================================================================
from siqo_journal    import SiqoJournal
from routes          import getApp

import pages as pag

#==============================================================================
# package's constants
#------------------------------------------------------------------------------
_VER      = 1.00
_IS_TEST  = True if os.environ['wsiqo-test-mode']=='1' else False

#==============================================================================
# Get an Flask Application Object
#------------------------------------------------------------------------------
app = getApp()

#==============================================================================
# Main
#------------------------------------------------------------------------------
if __name__ =='__main__':

    journal = SiqoJournal('wsiqo', debug=5)
    pag.journal = journal
    
    journal.I('Main start')
    
    if _IS_TEST:
        app.run(host='localhost', port=5000, debug=True, use_reloader=False)
    
    journal.O('Main end')
    

#==============================================================================
print(f"wsiqo.__init__ {_VER}")

#==============================================================================
#                              END OF FILE
#------------------------------------------------------------------------------
